<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DTS: dtsPush.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>dtsPush.c File Reference</h1><a class="el" href="structDTS.html">DTS</a> Push-Model Transfer Methods.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &lt;pthread.h&gt;</code><br>
<code>#include &lt;sys/socket.h&gt;</code><br>
<code>#include &lt;sys/time.h&gt;</code><br>
<code>#include &lt;netinet/in.h&gt;</code><br>
<code>#include &lt;arpa/inet.h&gt;</code><br>
<code>#include &lt;netdb.h&gt;</code><br>
<code>#include &lt;xmlrpc-c/base.h&gt;</code><br>
<code>#include &lt;xmlrpc-c/client.h&gt;</code><br>
<code>#include &lt;xmlrpc-c/server.h&gt;</code><br>
<code>#include &lt;xmlrpc-c/server_abyss.h&gt;</code><br>
<code>#include &quot;dts.h&quot;</code><br>
<code>#include &quot;dtsUDT.h&quot;</code><br>
<code>#include &quot;dtsPSock.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f474314bf0c7298787f3b631466db62b"></a><!-- doxytag: member="dtsPush.c::dts_nullHandler" ref="f474314bf0c7298787f3b631466db62b" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>dts_nullHandler</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtsPush_8c.html#f55531bdb93b1bfcd659758510ecd2a1">dts_xferPushFile</a> (void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Push a file from the src to the dest machine.  <a href="#f55531bdb93b1bfcd659758510ecd2a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtsPush_8c.html#7f9ce95b0c288f5c0f1515fdaa018b17">dts_xferReceiveFile</a> (void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Push a file from the src to the dest machine.  <a href="#7f9ce95b0c288f5c0f1515fdaa018b17"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="99390fcf722f24689439904d1b546dce"></a><!-- doxytag: member="dtsPush.c::dts" ref="99390fcf722f24689439904d1b546dce" args="" -->
<a class="el" href="structDTS.html">DTS</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>dts</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e9c89e7ff1fbfe74ed32f3bb6b69193f"></a><!-- doxytag: member="dtsPush.c::thread_sem" ref="e9c89e7ff1fbfe74ed32f3bb6b69193f" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>thread_sem</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4e3d0548c599124f2df64c499a8b0ee6"></a><!-- doxytag: member="dtsPush.c::queue_delay" ref="4e3d0548c599124f2df64c499a8b0ee6" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>queue_delay</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bfe1ab56be631e48e5edc9f0f1381486"></a><!-- doxytag: member="dtsPush.c::first_write" ref="bfe1ab56be631e48e5edc9f0f1381486" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>first_write</b></td></tr>

</table>
<hr><h2>Detailed Description</h2>
<a class="el" href="structDTS.html">DTS</a> Push-Model Transfer Methods. 
<p>
<a class="el" href="structDTS.html">DTS</a> Push-Model Transfer Methods<p>
The methods defined here are both the client and server-side code needed to implement the "push" model of data transfer. In this mode, an RPC command is called to push data from the source to the destination machine. The source machine acts as a server, opening the transfer sockets locally before sending a request to the remote machine to receive the file. Once the connection is established, transfer begins. The return status of this method then determines whether the transfer was successful.<p>
A sequence diagram of the process would look something like:<p>
Push Model:<p>
QMgr Host A Host B<p>
(1) ----[Push Msg] ----------&gt;<p>
(2) Socket setup<p>
(3) ----[FileRecieve Msg]-----&gt;<p>
(4) &lt;=====[Data Transfer]=====&gt;<p>
(5) &lt;----[Status Return]-------<p>
The 'QMgr' is the Queue Manager which initiates the request on the local machine.<p>
RPC Methods Implemented:<p>
dts_xferPushFile initiate Push transfer of file (src method) dts_xferReceiveFile begin receiving file (dest method)<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Mike Fitzpatrick, NOAO </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>6/10/09 </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="f55531bdb93b1bfcd659758510ecd2a1"></a><!-- doxytag: member="dtsPush.c::dts_xferPushFile" ref="f55531bdb93b1bfcd659758510ecd2a1" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dts_xferPushFile           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Push a file from the src to the dest machine. 
<p>
DTS_XFERPUSH -- Push a file from the src to the dest machine.<p>
RPC Params: xferId S transfer id method S transfer method fileName S file name fileSize I file size nthreads I num of transfer threads to open srcPort I starting port number destHost S FQDN of destination machine destCmdURL S destination xmlrpc URI<p>
RPC Returns: tsec I transfer time seconds tusec I transfer time micro-seconds status I transfer succeeded (0) or failed (1) ---------------------------------------------------------------------<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>caller param data </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status code </dd></dl>

<p>References <a class="el" href="dtsUtil_8c_source.html#l00354">dts_getLocalIP()</a>, <a class="el" href="dtsQueueUtil_8c_source.html#l01100">dts_queueFromPath()</a>, <a class="el" href="dtsQueueUtil_8c_source.html#l01153">dts_queueNameFmt()</a>, <a class="el" href="dtsSem_8c_source.html#l00207">dts_semGetVal()</a>, <a class="el" href="dtsSem_8c_source.html#l00131">dts_semInit()</a>, <a class="el" href="dtsSem_8c_source.html#l00187">dts_semRemove()</a>, <a class="el" href="dtsLog_8c_source.html#l00301">dtsErrLog()</a>, <a class="el" href="dtsLog_8c_source.html#l00069">dtsLog()</a>, <a class="el" href="dtsPSock_8c_source.html#l00162">psCollectThreads()</a>, <a class="el" href="dtsPSock_8c_source.html#l00211">psSendFile()</a>, <a class="el" href="dtsPSock_8c_source.html#l00083">psSpawnThreads()</a>, <a class="el" href="dtsUtil_8c_source.html#l00941">transferMB()</a>, <a class="el" href="dtsUtil_8c_source.html#l00919">transferMb()</a>, <a class="el" href="dtsUDT_8c_source.html#l00216">udtSendFile()</a>, and <a class="el" href="dtsUDT_8c_source.html#l00088">udtSpawnThreads()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7f9ce95b0c288f5c0f1515fdaa018b17"></a><!-- doxytag: member="dtsPush.c::dts_xferReceiveFile" ref="7f9ce95b0c288f5c0f1515fdaa018b17" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dts_xferReceiveFile           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Push a file from the src to the dest machine. 
<p>
DTS_XFERRECEIVEFILE -- Receive a file on the dest machine.<p>
RPC Params: xferId S transfer id fileName S file name fileSize I file size nthreads I num of transfer threads to open srcPort I starting port number srcIP S IP address of caller (string)<p>
RPC Return: 0 transfer succeeded 1 transfer failed ---------------------------------------------------------------------<p>
Receive a file on the dest machine.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>caller param data </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status code </dd></dl>

<p>References <a class="el" href="dtsQueueStat_8c_source.html#l00190">dts_qstatNetEnd()</a>, <a class="el" href="dtsQueueStat_8c_source.html#l00169">dts_qstatNetStart()</a>, <a class="el" href="dtsQueueUtil_8c_source.html#l01100">dts_queueFromPath()</a>, <a class="el" href="dtsQueueUtil_8c_source.html#l01153">dts_queueNameFmt()</a>, <a class="el" href="dtsLog_8c_source.html#l00069">dtsLog()</a>, <a class="el" href="dtsPSock_8c_source.html#l00162">psCollectThreads()</a>, <a class="el" href="dtsPSock_8c_source.html#l00397">psReceiveFile()</a>, <a class="el" href="dtsPSock_8c_source.html#l00083">psSpawnThreads()</a>, <a class="el" href="dtsUtil_8c_source.html#l00941">transferMB()</a>, <a class="el" href="dtsUtil_8c_source.html#l00919">transferMb()</a>, <a class="el" href="dtsUDT_8c_source.html#l00403">udtReceiveFile()</a>, and <a class="el" href="dtsUDT_8c_source.html#l00088">udtSpawnThreads()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Apr 11 11:51:12 2014 for DTS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
