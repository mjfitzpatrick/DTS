<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DTS: dtsh.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>dtsh.c File Reference</h1><code>#include &lt;pthread.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;sys/time.h&gt;</code><br>
<code>#include &lt;netdb.h&gt;</code><br>
<code>#include &lt;sys/socket.h&gt;</code><br>
<code>#include &lt;netinet/in.h&gt;</code><br>
<code>#include &lt;arpa/inet.h&gt;</code><br>
<code>#include &lt;sys/errno.h&gt;</code><br>
<code>#include &lt;sys/types.h&gt;</code><br>
<code>#include &lt;sys/stat.h&gt;</code><br>
<code>#include &quot;dts.h&quot;</code><br>
<code>#include &quot;dtsMethods.h&quot;</code><br>
<code>#include &quot;dtsPSock.h&quot;</code><br>
<code>#include &quot;build.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f0b5cfa4242ae7f98ba80fd23ef8afa9"></a><!-- doxytag: member="dtsh.c::APP_NAME" ref="f0b5cfa4242ae7f98ba80fd23ef8afa9" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>APP_NAME</b>&nbsp;&nbsp;&nbsp;&quot;dtsh&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="92673e33f27532767749b79edb8ef806"></a><!-- doxytag: member="dtsh.c::APP_VERSION" ref="92673e33f27532767749b79edb8ef806" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>APP_VERSION</b>&nbsp;&nbsp;&nbsp;&quot;1.0&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c9c1311707cba8abcf575d13a527bc7b"></a><!-- doxytag: member="dtsh.c::SZ_SBUF" ref="c9c1311707cba8abcf575d13a527bc7b" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SZ_SBUF</b>&nbsp;&nbsp;&nbsp;4096</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="29b7451465deac204c5f7cb1f9c6e1fc"></a><!-- doxytag: member="dtsh.c::MAX_ARGS" ref="29b7451465deac204c5f7cb1f9c6e1fc" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MAX_ARGS</b>&nbsp;&nbsp;&nbsp;32</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtsh_8c.html#a7df7208f8d6f2f7782738c2029ed70f">SH_MAX_THREADS</a>&nbsp;&nbsp;&nbsp;1024</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtsh_8c.html#0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1c2046dcb30a629d6d9f45ff8f403f12"></a><!-- doxytag: member="dtsh.c::host" ref="1c2046dcb30a629d6d9f45ff8f403f12" args="" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>host</b> = &quot;localhost&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fd18596eb21b31005561cc5941ddeac5"></a><!-- doxytag: member="dtsh.c::lhost" ref="fd18596eb21b31005561cc5941ddeac5" args="" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>lhost</b> = &quot;&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7353cae57e2530c316ddacb27ef14932"></a><!-- doxytag: member="dtsh.c::cmd" ref="7353cae57e2530c316ddacb27ef14932" args="" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>cmd</b> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="44196e6a5696d10442c29e639437196e"></a><!-- doxytag: member="dtsh.c::path" ref="44196e6a5696d10442c29e639437196e" args="" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>path</b> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="74bb62276efdf39dd94048e007fca05b"></a><!-- doxytag: member="dtsh.c::config" ref="74bb62276efdf39dd94048e007fca05b" args="" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>config</b> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9027b352db4085a0122952932d065705"></a><!-- doxytag: member="dtsh.c::alias" ref="9027b352db4085a0122952932d065705" args="" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>alias</b> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9e56413137aaccc450e1f8fa7b075545"></a><!-- doxytag: member="dtsh.c::fsize" ref="9e56413137aaccc450e1f8fa7b075545" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><b>fsize</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1ea5d0cb93f22f7d0fdf804bd68c3326"></a><!-- doxytag: member="dtsh.c::mode" ref="1ea5d0cb93f22f7d0fdf804bd68c3326" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>mode</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c3e1795766a80ec63b157951b4b9a7d4"></a><!-- doxytag: member="dtsh.c::debug" ref="c3e1795766a80ec63b157951b4b9a7d4" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>debug</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0b2caeb4b6f130be43e5a2f0267dd453"></a><!-- doxytag: member="dtsh.c::verbose" ref="0b2caeb4b6f130be43e5a2f0267dd453" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>verbose</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="55602ca214fb365e8deef9a73c8442e7"></a><!-- doxytag: member="dtsh.c::quiet" ref="55602ca214fb365e8deef9a73c8442e7" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>quiet</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="829add167f33003098445ad1e6b2d13a"></a><!-- doxytag: member="dtsh.c::noop" ref="829add167f33003098445ad1e6b2d13a" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>noop</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="314dbcb00015eeb2e4b0121e96bfffde"></a><!-- doxytag: member="dtsh.c::poke" ref="314dbcb00015eeb2e4b0121e96bfffde" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>poke</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e771d2f10d54356a879a6124e264d1d1"></a><!-- doxytag: member="dtsh.c::doShell" ref="e771d2f10d54356a879a6124e264d1d1" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>doShell</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="febff510c77490d624a575300fb50d5a"></a><!-- doxytag: member="dtsh.c::doTime" ref="febff510c77490d624a575300fb50d5a" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>doTime</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7440bd6e24aa1071073ef2a5c4ede966"></a><!-- doxytag: member="dtsh.c::contact" ref="7440bd6e24aa1071073ef2a5c4ede966" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>contact</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7a829e6fd74e94e0edf10550470d844c"></a><!-- doxytag: member="dtsh.c::rate" ref="7a829e6fd74e94e0edf10550470d844c" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>rate</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dcc9a19ad3119f823a658f6a49a24e64"></a><!-- doxytag: member="dtsh.c::method" ref="dcc9a19ad3119f823a658f6a49a24e64" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>method</b> = TM_PSOCK</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ac31eb68bff694554a182bd796b2f1c5"></a><!-- doxytag: member="dtsh.c::res" ref="ac31eb68bff694554a182bd796b2f1c5" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>res</b> = OK</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b96dbd9a8b1abb3da4fe742417fcc3ca"></a><!-- doxytag: member="dtsh.c::cmdPort" ref="b96dbd9a8b1abb3da4fe742417fcc3ca" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>cmdPort</b> = DTSSH_PORT</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="38e295bc5474de50e9f88db612561fa7"></a><!-- doxytag: member="dtsh.c::loPort" ref="38e295bc5474de50e9f88db612561fa7" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>loPort</b> = DTSSH_PORT + 5</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="01d264c50baf2315ce24eda6c8b2a226"></a><!-- doxytag: member="dtsh.c::hiPort" ref="01d264c50baf2315ce24eda6c8b2a226" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>hiPort</b> = DTSSH_PORT + 5 + DEF_MAX_PORTS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2b6a46c4274b223ea03fb4a7b80f4a5a"></a><!-- doxytag: member="dtsh.c::nthreads" ref="2b6a46c4274b223ea03fb4a7b80f4a5a" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>nthreads</b> = DEF_NTHREADS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ca392a8d3941cd0740aef3ad92545d67"></a><!-- doxytag: member="dtsh.c::in" ref="ca392a8d3941cd0740aef3ad92545d67" args="" -->
FILE *&nbsp;</td><td class="memItemRight" valign="bottom"><b>in</b> = (FILE *) NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="99390fcf722f24689439904d1b546dce"></a><!-- doxytag: member="dtsh.c::dts" ref="99390fcf722f24689439904d1b546dce" args="" -->
DTS *&nbsp;</td><td class="memItemRight" valign="bottom"><b>dts</b> = (DTS *) NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e46fcc990156bad39982ba63a195779f"></a><!-- doxytag: member="dtsh.c::clientUrl" ref="e46fcc990156bad39982ba63a195779f" args="" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>clientUrl</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="610eba3d96a801323b46b5c28cbd476c"></a><!-- doxytag: member="dtsh.c::cmdbuf" ref="610eba3d96a801323b46b5c28cbd476c" args="[SZ_SBUF]" -->
char&nbsp;</td><td class="memItemRight" valign="bottom"><b>cmdbuf</b> [SZ_SBUF]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="122c83a43e601449c2ade61d02e693a8"></a><!-- doxytag: member="dtsh.c::localIP" ref="122c83a43e601449c2ade61d02e693a8" args="[SZ_PATH]" -->
char&nbsp;</td><td class="memItemRight" valign="bottom"><b>localIP</b> [SZ_PATH]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9a9ff89716e45ff905821dbbbe51dd13"></a><!-- doxytag: member="dtsh.c::subArg" ref="9a9ff89716e45ff905821dbbbe51dd13" args="[MAX_ARGS]" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>subArg</b> [MAX_ARGS]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2d886d8443ccfb900dca326ed9ba5dad"></a><!-- doxytag: member="dtsh.c::numArgs" ref="2d886d8443ccfb900dca326ed9ba5dad" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>numArgs</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9c2c8932cd289db05ac20cf7d828771c"></a><!-- doxytag: member="dtsh.c::xArgs" ref="9c2c8932cd289db05ac20cf7d828771c" args="[MAX_ARGS]" -->
char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>xArgs</b> [MAX_ARGS]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0040a80030bf6365af946d5a932f0fbb"></a><!-- doxytag: member="dtsh.c::nXArgs" ref="0040a80030bf6365af946d5a932f0fbb" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>nXArgs</b> = 0</td></tr>

</table>
<hr><h2>Detailed Description</h2>
DTSH -- Utility app to send a command to a DTS daemon on a remote host. Note we only support a subset of commands that might be useful in a scripting environment, the DTSMON as a console has full access to all the DTSD functionality. The first argument is always the host to be contacted, either a direct IP address or a DTS logical name if a local config file can be found. The second argument is the name of the command followed by whichever arguments that command requires.<p>
Usage: dtsh [options] &lt;cmd&gt; &lt;arg&gt; [&lt;arg&gt; ...]<p>
Options: -h print help<p>
-c [fname] set config file -i run interactive shell -n no-op flag -q quiet - suppress output flag -t [name] target host flag -s run as command shell<p>
-H &lt;port&gt; set hi transfer port -L &lt;port&gt; set low transfer port -N &lt;port&gt; set number of threads -P &lt;port&gt; set (local) command port<p>
-d debug flag -v verbose output flag<p>
Commands: !&lt;cmd&gt; shell escape rewind rewind command input (primitive loop) sleep &lt;N&gt; suspend execution for &lt;N&gt; seconds print &lt;str&gt; print &lt;str&gt; to stdout port &lt;port&gt; restart on specified port target &lt;host&gt; set command target host (name or IP)<p>
debug turn on debug output verbose set verbose output flag logout quit the shell<p>
// FILE COMMANDS access &lt;path&gt; test file access to sanbox &lt;path&gt; cat &lt;file&gt; concatenate &lt;file&gt; to stdout cfg print DTS config on target machine cwd print current working directory del [-r] &lt;pattern&gt; [passwd] delete files matching pattern dir [-l] [&lt;pattern&gt;] list filenames matching pattern ddir &lt;qname&gt; list delivery directory for named queue df return free disk (KB) du return used disk (KB) echo &lt;str&gt; echo a string fget &lt;path&gt; get file from remote host fsize &lt;path&gt; print file size ftime &lt;path&gt; [a|m|c] print file &lt;mode&gt; time ls [-l] [&lt;pattern&gt;] list filenames matching pattern mkdir &lt;path&gt; make a directory poke poke a host svrping (server) ping a host tping threaded ping ping ping a host pingstr ping a host (string return) pingsleep &lt;n&gt; ping a host and sleep (int return) pingarray ping a host (array return) pclient print client information pqueue &lt;queue&gt; print queue information mv &lt;old&gt; &lt;new&gt; rename a file nping &lt;N&gt; ping a host &lt;N&gt; times prealloc &lt;path&gt; &lt;nbytes&gt; preallocate file space pwd print current working directory read &lt;path&gt; read from file rename &lt;old&gt; &lt;new&gt; rename a file rm &lt;pattern&gt; delete files matching patter stat &lt;path&gt; print fille stat() of file touch &lt;path&gt; touch a file's access time<p>
// FILE TRANSFER COMMANDS give &lt;file&gt; &lt;args&gt; transfer local to remote, server take &lt;file&gt; &lt;args&gt; transfer remote to local, server push &lt;file&gt; &lt;args&gt; transfer local to remote, client pull &lt;file&gt; &lt;args&gt; transfer remote to local, client<p>
// QUEUE COMMANDS dest &lt;qname&gt; get destination of named queue trace &lt;qname&gt; trace connectivity of named queue<p>
// ADMIN COMMANDS abort abort dtsd shutdown shutdown dtsd<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Mike Fitzpatrick, NOAO </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>July 2010 </dd></dl>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a7df7208f8d6f2f7782738c2029ed70f"></a><!-- doxytag: member="dtsh.c::SH_MAX_THREADS" ref="a7df7208f8d6f2f7782738c2029ed70f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SH_MAX_THREADS&nbsp;&nbsp;&nbsp;1024          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
DTS_SHTPING -- Multi-threaded PING. 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="0ddf1224851353fc92bfbff6f499fa97"></a><!-- doxytag: member="dtsh.c::main" ref="0ddf1224851353fc92bfbff6f499fa97" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Task entry point. 
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Apr 11 11:51:25 2014 for DTS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
